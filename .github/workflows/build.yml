on: [push]
# docker run -v ./:/project:rw hb build --release -v --target armv7-unknown-linux-gnueabihf
name: ARMv7 build

jobs:
  linux_arm7:
    name: Linux ARMv7
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Setup docker build
        uses: docker/setup-buildx-action@v2
      - name: Docker build image
        with:
          context: .
          file: "Dockerfile"
          tags: marisusis/pi-build:latest
          load: true
          cache-from: type=registry,ref=user/app:latest
          cache-to: type=inline
          push: false
      - name: Docker run
        shell: bash
        run: |
          docker run -v ./:/project:rw marisusis/pi-build:latest build --release --target armv7-unknown-linux-gnueabihf